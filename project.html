<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Summary</title>
    <style>
        html, body {
            margin: 0;
            padding: 0;
        }

        :root {
            /* Wired-like gutters: small on phones, larger on desktop */
            --page-gutter: clamp(12px, 4vw, 48px);
        }

        /* Prevent anchor jumps from being hidden under fixed navbar */
        html {
            scroll-padding-top: 90px;
            cursor: none; /* ensure cursor hidden at viewport edges */
        }

          .header {
        text-align: center;
        padding: 30px 0 20px 0;
        max-width: 800px;
        margin: 0 auto 0 auto;
        padding: 20px;
        }

        .header h1 {
            font-family: futura;
            font-size: 3em;
            color: #000000;
            bottom: 30px;
        }


        body {
            background-color: #ffffff;
            margin: 0;
            /* create page gutters without using body margins (fixes cursor edge issues) */
            padding: 90px var(--page-gutter) 0 var(--page-gutter);
            position: relative;
            cursor: none;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        /*back to top button*/
        .back-to-top {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
            background-color: rgba(255, 255, 255, 0.8);
            color: #333;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
        }

        .back-to-top.visible {
            opacity: 1;
            visibility: visible;
        }

        .back-to-top:hover {
            background-color: rgba(255, 255, 255, 0.9);
            transform: translateY(-2px);
        }

        .back-to-top::after {
            content: '↑';
            font-size: 20px;
        }
         /*Navbar*/
        .navbar {
        background-color: rgba(0, 0, 0, 0.8);
        padding: 10px 0;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        z-index: 1000;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .nav-links {
        display: flex;
        justify-content: center;
        gap: 20px;
        max-width: 800px;
        margin: 0 auto;
        }

        .nav-button {
        padding: 10px 20px;
        color: rgb(245, 240, 242);
        font-family: 'Futura';
        font-weight: medium;
        text-decoration: none;
        border-radius: 10px;
        position: relative;
        transition: all 0.3s;
        }
        
        .nav-button:hover {
        color: rgb(239, 183, 183);
        }

        /* Desktop-only: make nav feel less cramped on wide screens */
        @media screen and (min-width: 1024px) {
            .nav-links {
                max-width: 1100px;
                gap: 32px;
            }
            .nav-button {
                padding: 12px 24px;
            }
        }

        .cursor-halo {
            position: fixed;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
            pointer-events: none;
            transform: translate(-50%, -50%);
            z-index: 9999;
            transition: width 0.3s, height 0.3s;
            /* Invert automatically on light backgrounds */
            mix-blend-mode: difference;
            box-shadow: 0 0 10px rgba(255,255,255,0.6);
        }

        * {
            cursor: none;
        }

        .cursor-halo.active {
            width: 100px;
            height: 100px;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 70%);
        }

        /* Hide custom cursor on touch devices (prevents halo stuck at top-left) */
        @media (hover: none) and (pointer: coarse) {
            .cursor-halo {
                display: none;
            }
            body, * {
                cursor: auto !important;
            }
        }

        /* Fallback: force-hide custom cursor on small screens */
        @media screen and (max-width: 768px) {
            .cursor-halo {
                display: none !important;
                opacity: 0 !important;
                visibility: hidden !important;
            }
            body, * {
                cursor: auto !important;
            }
        }

        .project-content {
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            text-align: left;
        }

        .project-section {
            padding: 25px;
            margin-bottom: 0;
            padding-bottom: 0;
            text-align: left;
        }

        .project-section h2 {
            font-family: Avenir bold;
            color: #000000;
            font-size: 1.8em;
            margin-bottom: 0;
        }

        .project-section h3 {
            font-family: sans-serif Bold;
            font-size: 1.2em;
            color: #000000;
            margin: 15px 0;
            text-align: left;
        }

        .project-section p {
            font-family: sans-serif;
            font-size:1em;
            line-height: 1.6;
            color: #000000;
            margin: 15px 0;
            text-align: left;
        }

        /* Center captions that describe images */
        p.caption {
            text-align: center;
            /* Less space above (image→caption), more space below (caption→next) */
            margin: 2px 0 10px;
            font-family: sans-serif;
            font-weight: 400;
            font-size: 0.9em;
            color: #444;
        }

        /* Reduce gap right after the header rendering */
        .header p.caption {
            margin-bottom: 0;
        }

        .header + .project-section,
        .header .project-section {
            padding-top: 10px;
        }

        .header .project-section h2:first-of-type {
            margin-top: 6px;
        }

        .project-image {
            width: 100%;
            height: auto;
            border-radius: 8px;
            margin-top: 0;
            margin: 0;          
        }

        /* Smaller images (don’t take over the page) */
        .project-image.small-image {
            width: 70%;
            max-width: 650px;
            display: block;
            margin: 10px auto;
        }

        /* Slightly smaller comparison charts */
        .project-image.comparison-image {
            width: 80%;
            max-width: 900px;
            display: block;
            margin: 10px auto;
        }

        .project-link {
            color: #0066cc;             /* Link color */
            text-decoration: none;      /* Removes underline */
            font-weight: 500;          /* Makes text slightly bold */
            transition: color 0.3s;    /* Smooth color transition on hover */
        }

        .project-link:hover {
            color: #003366;            /* Darker color when hovering */
            text-decoration: underline; /* Adds underline on hover */
        }
    /*adjust to different screen*/
        @media screen and (max-width: 768px) {
            /* Navigation bar adjustments */
            .navbar {
                padding: 5px 0;
            }

            .nav-links {
                flex-wrap: wrap;
                gap: 10px;
                padding: 0 10px;
            }

            .nav-button {
                padding: 8px 15px;
                font-size: 0.9em;
            }
            .cursor-halo {
                width: 30px;
                height: 30px;
                box-shadow: 0 0 6px rgba(255,255,255,0.3);
            }

            .project-image.small-image {
                width: 90%;
                max-width: 90%;
            }

            html {
                scroll-padding-top: 70px;
            }

            body {
                padding: 70px var(--page-gutter) 0 var(--page-gutter);
            }

            .project-section {
                padding-left: 0;
                padding-right: 0;
            }
        }

        @media screen and (max-width: 480px) {
            /* Navigation bar adjustments for very small screens */
            .nav-links {
                gap: 5px;
            }

            .nav-button {
                padding: 6px 12px;
                font-size: 0.8em;
            }
            .cursor-halo {
                width: 20px;
                height: 20px;
                box-shadow: 0 0 4px rgba(255,255,255,0.3);
            }

            .project-image.small-image {
                width: 100%;
                max-width: 100%;
            }

            html {
                scroll-padding-top: 65px;
            }

            body {
                padding: 65px var(--page-gutter) 0 var(--page-gutter);
            }

            .project-section {
                padding-left: 0;
                padding-right: 0;
            }
        }   
        /*progress bar*/

        .progress-container {
            position: fixed;
            top: 60px; /* Default position, will be updated by JavaScript */
            width: 100%;
            left:0;
            height: 8px;
            z-index: 1000;
        }

        .progress-bar {
            height: 8px;
            background: linear-gradient(to right, white,rgb(239, 183, 183));
            width: 0%;
            transition: width 0.1s ease-out;
        }

    </style>
</head>
<body>
    <div class="cursor-halo"></div>
    <!-- Navigation bar -->
    <nav class="navbar">
        <div class="nav-links">
            <a href="index.html" class="nav-button">Home</a>
            <a href="history.html" class="nav-button">History</a>
            <a href="project.html" class="nav-button">Project</a>
            <a href="impact.html" class="nav-button">Impact</a>
            <a href="resources.html" class="nav-button">Resources</a>
        </div>
    </nav>
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    <!-- Page content -->
    <div class="header">
        <h1>Project Summary</h1>
        <img src="Image/render.png" class="project-image" decoding="async" loading="eager" fetchpriority="high">
        <p class="caption">16 Corner Rendering</p>
        
    <div class="project-section">
        <h2 id="background">Background</h2>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; 16 Corner is a portfolio of five multifamily properties comprising 44 units, originally built between 1949 and 1952. Many residents have longstanding ties to Overtown, with some families living in the area for generations. </p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; In 2018, the City of Miami designated the five buildings as unsafe structures, prompting a critical decision between demolition and preservation. Demolition would have resulted in resident displacement and a reduction in available housing units. Under the site’s T3-O zoning designation in the Miami 21 Master Plan, allowable density would have been limited to approximately 12 units, further constraining the housing supply in a neighborhood already experiencing a shortage.</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; The Omni Community Redevelopment Agency ("Omni CRA") engaged Avra Jain, founder of The Vagabond Group, to lead the preservation of the existing structures. The project aimed to retain original architectural features, preserve housing supply, retrofit the buildings for safety and resilience, and restore healthy housing for current and future residents. </p>

        <h2 id="public-private-partnership">Public-Private Partnership</h2>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; 16 Corner was realized through a collaboration between The Vagabond Group (“Vagabond”), the Omni CRA, Mt. Zion Community Development Corporation (“Zion”), and Miami-Dade County Public Housing and Community Development (“PHCD”), which provided supplemental funding. The Omni CRA provided a $3.8 million forgivable loan—$1.8 million for acquisition and $2 million for construction—with a 30-year Affordable Housing Covenant placed on all units, ensuring long-term affordability. The PHCD provided supplemental funding through the Surtax Loan Program and the Development Inflation Adjustment Fund (“DIAF”) to address funding shortfalls. </p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; Zion joined as a community-based partner, receiving a 7.5% ownership interest in the project. Their role was to help with community outreach and to connect local residents with any vacancy opportunities. The partnership exemplifies a community-driven model that leverages both public and private investment to support equitable development and strengthen local engagement. </p>
        
        <h2 id="location">Location</h2>
        <img src="project-summary/16%20Corner%20Location%20Map.png" class="project-image" decoding="async" loading="lazy">
        <p>&nbsp;&nbsp;&nbsp;&nbsp;16 Corner comprises properties at 1535 NW 1st Place Miami, FL 33136; 1540 NW 1st Court Miami, FL 33136; and 1541 NW 1st Place, Miami, FL 33136. The project is located in Overtown within the Omni CRA district. It spans three parcels along the north-south corridor of Northwest 1st Place, adjacent to one of the areas that has historically faced infrastructure and housing investment gaps in the district.</p>

        <h2>Scale</h2>
        <img src="project-summary/16%20Corner%20Aerial%20Map.png" class="project-image" decoding="async" loading="lazy">
        <p>&nbsp;&nbsp;&nbsp;&nbsp; The development comprises five two-story, garden-style apartment buildings, covering a total land area of 29,400 square feet with a total building footprint of 20,312 square feet. It includes 44 units: 12 studios, 20 one-bedrooms, 6 two-bedrooms, and 6 three-bedrooms. Renovation began in late 2018 and was completed in 2026.</p>

        <h2 id="significance">Significance</h2>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; The Omni CRA-funded 16 Corner advances the CRA’s mandate to support local residents. Located in historic Overtown, the project responds to the area’s long-standing impacts from major infrastructure investments by expanding the supply of quality housing while preserving neighborhood character. </p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; Most of the original buildings required extensive upgrades. Vagabond oversaw the restoration of architectural features and the renovation of both interiors and exteriors, while also prioritizing local economic impact by engaging local contractors and small businesses. Renovations were completed one building at a time to avoid displacing residents. Tenants were temporarily relocated to vacant units within the complex with the opportunity to return to their original homes upon completion. </p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; As part of the initiative, legacy tenants were retained under existing lease terms at their original rent levels. The average rent for legacy tenants is $837 per unit per month, corresponding to an average affordability level of 33% AMI. </p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; Operating expense for legacy units averages $480 per unit per month, representing approximately 57% of gross rental revenue, which raises long-term financial sustainability considerations. Among legacy tenants, the lowest affordability level is 19% AMI, with a rent of $615 per month for a three-bedroom, two-bathroom unit. </p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; Across the property, the average rent for all tenants is $1,189 per unit per month with an average affordability level of 50% AMI. The upgraded units have significantly contributed to improved living conditions, and one legacy tenant now serves as the on-site property manager.</p>

        <h2>Above and Beyond</h2>
        <h3>Thoughtful Design</h3>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;Renovations were tailored to meet residents’ needs. Kitchens now feature custom-built, floor-to-ceiling cabinets for added storage, deep sinks, and tiled backsplashes. Each bedroom includes built-out closets with mirrored doors. An on-site laundry room—previously abandoned—will be fully restored by the end of construction. </p>  
        <img src="project-summary/window.jpg" class="project-image small-image" decoding="async" loading="lazy">
        <p class="caption">Bedroom with Great Natural Light</p>

        <h3>Built for Longevity</h3>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;To enhance durability, comfort, and soundproofing, upgrades include resilient channels, whisper mats beneath flooring, and additional mold-resist wool insulation between walls and in ceilings.</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;Ceiling fans were installed in addition to energy-efficient air conditioning systems to provide flexible climate control. All impact glass windows were replaced with screened models to allow for natural ventilation when desired.</p>
        <img src="project-summary/sustainability.jpg" class="project-image small-image" decoding="async" loading="lazy">
        <p class="caption">Palm Tress Planted in the Courtyard</p>
        
        <h3>Sustainability</h3>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;Kitchens feature track lighting to reduce energy consumption and improve overall functionality. Additionally, four palm trees now stand in the courtyard between buildings 1540 and 1550, creating welcoming shade and green space for residents. Additional landscaping enhancements are planned for the remaining buildings as the project progresses.</p>
        
        <h2 id="before-after">Before and After Pictures</h2>
        <h3>Interior</h3>
        <img src="project-summary/Kitchen%20before%20Renovation.png" class="project-image" decoding="async" loading="lazy">
        <p class="caption">Kitchen Before Renovation</p>
        <img src="project-summary/kitchen-during-construction.jpg" class="project-image" decoding="async" loading="lazy">
        <img src="project-summary/kitchen-during-construction-wall.jpg" class="project-image" decoding="async" loading="lazy">
        <p class="caption">Kitchen During Renovation</p>
        <img src="project-summary/kitchen-after.jpg" class="project-image" decoding="async" loading="lazy"> 
        <p class="caption">Kitchen After Renovation</p>

        <h3>Exterior</h3>
        <img src="project-summary/Exterior%20Before%20After%20North%20Facade.png" class="project-image" decoding="async" loading="lazy">
        <img src="project-summary/Exterior%20Before%20After%20North%20Facade%202.png" class="project-image" decoding="async" loading="lazy">
        <p class="caption">North Facade Before and After Renovation</p>
        <img src="project-summary/Exterior%20Before%20After%20NE%20Facade.png" class="project-image" decoding="async" loading="lazy">
        <p class="caption">Northeast Facade Before and After Renovation</p>

        <h2 id="challenge">Challenges </h2>
        <h3>1.&nbsp;Funding Challenge</h3>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;16 Corner was financed through a combination of public and private sources. Initially, it received a $3.8 million forgivable loan from Omni CRA, a $1.76 million loan from Bradesco bank, and $400,000 in equity. Additional funding included $812,000 from the Surtax Loan Program in 2022 and $585,000 from Development Inflation Adjustment Fund (DIAF) in 2023 issued by Miami-Dade County Public Housing and Community Development (PHCD).</p>
        <img src="project-summary/16 Corner Sources and Uses.png" class="project-image" decoding="async" loading="lazy">
        <p>&nbsp;&nbsp;&nbsp;&nbsp;The total projected cost of the project is approximately $9.7 million. In addition to traditional loans, equity, and grants, The Vagabond Group contributed by deferring the developer fee and covering architectural and project management costs. (See funding structure graph below for details.)</p>
        <img src="project-summary/16 Corner Funding Structure.png" class="project-image" decoding="async" loading="lazy">
        <p>&nbsp;&nbsp;&nbsp;&nbsp;Accessing public funding, even for experienced developers, can involve months of applications and extensive documentation. For newer developers, this process can be particularly resource-intensive, and making similar preservation projects financially feasible remains a common challenge across the industry.</p>

        <h3>2.&nbsp;Carrying Costs and Budget Shortfalls</h3>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;Building 1560 serves as an example of unexpected cost fluctuations in a prolonged phased development. Supply chain shortages during COVID19 led to sharp increases in construction material costs. Although the original estimate for construction was $760,239.04, final costs rose to nearly $1 million. </p>
        <img src="project-summary/1560 & 1540 payapp sum.png" class="project-image comparison-image" decoding="async" loading="lazy">
        <p>&nbsp;&nbsp;&nbsp;&nbsp;The five highest-cost categories for Building 1560 were drywall, electrical, plumbing, structural work, and windows. Plumbing costs nearly doubled, and window costs increased by more than 50% compared to the original contract. Building 1540 and 1560 share the same floorplans. Building 1540 was the first to be completed, and 1560 was the last to be completed. The same five categories for 1540 cost $238,175.77 less than 1560 (see details below). This represents a 112% increase in costs for 1560 compared to 1540.</p>
        <img src="project-summary/1560 & 1540 comparison.png" class="project-image comparison-image" decoding="async" loading="lazy">
        <p>&nbsp;&nbsp;&nbsp;&nbsp;Budget shortfalls and additional carrying costs were ultimately borne by the developers. For developers with limited access to alternative funding, such overruns can jeopardize project progress.</p>   
        
        <h3>3.&nbsp;Municipal Coordination</h3>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;A portion of 16 Corner’s funding came from the PHCD’s Surtax Loan Program. However, each disbursement request (draw) required a lengthy review and approval process, often taking several months. This delay created added financial and administrative burdens, particularly for smaller development firms with limited staffing and funds. </p>

        <h3>4.&nbsp;Misconception about Renovation</h3>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;There is a common perception that renovation is more cost-effective than new construction. However, 16 Corner demonstrated that this is not always the case. The buildings had not undergone major improvements since their original construction in the 1950s. Once renovation began, severe deterioration was discovered: compromised foundations, structural instability, and widespread mold in old building materials. In effect, the project became a near-total rebuild. Were it not for zoning restrictions that would have reduced allowable density, a ground-up new construction approach would likely have been more cost-efficient and time-saving.</p>

        <h3>5.&nbsp;The Cost of Doing Things Right</h3>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;Renovation on Building 1535 was paused for nearly two years during the COVID-19 pandemic due to a commitment to combined impact of public health constraints and the logistical complexity of relocating residents while maintaining safe construction practices. While relocating tenants off-site and renovating all five buildings simultaneously may have reduced overall project duration and costs, the decision was made to prioritize minimizing resident displacement. This approach extended the construction timeline and increased project risk but aligned with the project’s commitment to resident stability and community preservation.  </p>

        <h3>6.&nbsp;Security Challenges</h3>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;Construction sites must always guard against theft of materials – however, absorbing that expense is much more difficult for a small project. Several theft incidents occurred during construction. Plumbing and electrical infrastructure comprised of copper and aluminum were stolen on multiple occasions. Additionally, workers’ tools and appliances were taken. To avoid further unexpected costs and delays in replacing materials, the Omni CRA was able to provide a security company at their expense. </p>  

        <h3>7.&nbsp;Infrastructure Challenges: "Silent Killer"</h3>
        <img src="project-summary/sewer-before.jpg" class="project-image small-image" decoding="async" loading="lazy">
        <p class="caption">Sewer Snake Condition Before Improvement</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp;When connecting the building’s plumbing to the County sewer system, it was discovered that the property had never been formally connected to the County sewer line. The development team was initially advised to connect to the existing infrastructure. However, upon attempting the connection, the plumber identified a broken sewer snake lodged within the sewer line, making connection impossible. 
        The County indicated that an infrastructure upgrade would not be scheduled until 3 years later. Both the General Contractor and the Omni CRA contacted the Water and Sewer department to seek resolution but did not receive a response. As a result, the project experienced an approximately two-month delay while the issue remained unresolved. It was ultimately by the ownership resolved following escalation to County leadership.
        This experience highlights the challenges developers may face when unforeseen infrastructure conditions arise, particularly for smaller or emerging developers who may lack the relationships or resources to expedite interagency coordination. </p>   


        <h2 id="recommendations">Recommendations from The Developer</h2>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; 1. Developers should not experience extended delays, often for weeks or months, in receiving reimbursements. For projects reaching Certificate of Occupancy (“CO”), the agency should fund the final Pay Application (“PayApp”) to the General Contractor (“GC”) directly or concurrently, with the developer responsible for covering any remaining shortfall.</p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; 2. Public officials and agency representatives should leverage the Live Local Act (especially on Real Estate tax reduction) and advocate for statutory language that authorizes local municipalities to extend similar tax treatment to infill affordable housing projects under agency oversight (e.g., “CRA”, “PHCD”), including smaller-scale development with affordability covenants such as fourplexes or eightplexes. Infill affordable housing delivers significant public benefits, including its proximity to public transportation, neighborhood continuity, and efficient use of existing infrastructure, and warrants equal or greater policy support. </p>
        <p>&nbsp;&nbsp;&nbsp;&nbsp; 3. Establish a dedicated support team and a centralized hotline for affordable housing developers to help facilitate timely resolution of infrastructure, permitting, inspections, and related project issues.</p>
        
        <p style="color: rgb(0, 0, 0); text-align: center; margin: 20px 0 20px 0; padding-bottom: 20px;">Written and documented by Su Zhang</p>
        
    </div>
    <button class="back-to-top" onclick="scrollToTop()"></button>

<script>
    // Cursor halo effect
    const cursorHalo = document.querySelector('.cursor-halo');
       
    document.addEventListener('mousemove', (e) => {
           cursorHalo.style.left = e.clientX + 'px';
           cursorHalo.style.top = e.clientY + 'px';
       });
   
    document.addEventListener('mousedown', () => {
           cursorHalo.classList.add('active');
       });
   
    document.addEventListener('mouseup', () => {
           cursorHalo.classList.remove('active');
       });

     // Position progress bar dynamically based on navbar height
     function updateProgressBarPosition() {
        const navbar = document.querySelector('.navbar');
        const progressContainer = document.querySelector('.progress-container');
        if (navbar && progressContainer) {
            const navbarHeight = navbar.offsetHeight;
            progressContainer.style.top = navbarHeight + 'px';
        }
    }

    // Update on load and resize
    updateProgressBarPosition();
    window.addEventListener('resize', updateProgressBarPosition);

     // Reading progress bar
     window.onscroll = function() {
        const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
        const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (winScroll / height) * 100;
        document.getElementById("progressBar").style.width = scrolled + "%";
    };
    // Back to Top functionality
    const backToTopButton = document.querySelector('.back-to-top');

    window.addEventListener('scroll', function() {
        // Show button when user scrolls down 300px
        if (window.scrollY > 300) {
            backToTopButton.classList.add('visible');
        } else {
            backToTopButton.classList.remove('visible');
        }
    });

    // Stable hash-link positioning (prevents landing "between paragraphs" due to late-loading images)
    function scrollToHashTarget() {
        if (!window.location.hash) return;
        const id = decodeURIComponent(window.location.hash.slice(1));
        if (!id) return;
        const target = document.getElementById(id);
        if (!target) return;

        const navbar = document.querySelector('.navbar');
        const navbarHeight = navbar ? navbar.offsetHeight : 0;
        const y = target.getBoundingClientRect().top + window.scrollY - navbarHeight - 12;
        window.scrollTo({ top: Math.max(0, y), behavior: 'auto' });
    }

    // Run once on load, then again shortly after to account for lazy images/late layout.
    window.addEventListener('load', () => {
        scrollToHashTarget();
        setTimeout(scrollToHashTarget, 250);
        setTimeout(scrollToHashTarget, 800);
    });
    // Also handle bfcache restores (back/forward)
    window.addEventListener('pageshow', (e) => {
        if (e.persisted) scrollToHashTarget();
    });

    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }
</script>   
</body>
</html>
